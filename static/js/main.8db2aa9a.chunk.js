(this.webpackJsonphotel=this.webpackJsonphotel||[]).push([[0],{16:function(e,t,n){},21:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),s=n(8),i=n.n(s),l=(n(16),n(4)),o=n(5),r=n(2),d=n(7),h=n(6),u=n(9),j=n(0);function m(e){return Object(j.jsx)("a",{className:"btn btn-outline-primary",href:"#signin",onClick:e.onClick,children:"Sign in"})}function b(e){return Object(j.jsx)("a",{className:"btn btn-outline-primary",href:"#signout",onClick:e.onClick,children:"Sign out"})}function k(e){return e.authenticated?Object(j.jsx)(b,{onClick:e.signOutClick}):Object(j.jsx)(m,{onClick:e.signInClick})}function O(e){var t;return Object(j.jsxs)("div",{children:[Object(j.jsxs)("h1",{className:"display-4",children:["Welcome ",e.name,"!"]})," ",Object(j.jsx)("p",{className:"lead",children:"There are 3 services in this demo, click on each one to see its response."}),Object(j.jsxs)("p",{className:"lead",children:["You have the following roles: ",null===(t=e.roles)||void 0===t?void 0:t.join(", ")]})]})}function p(e){return Object(j.jsxs)("div",{children:[Object(j.jsx)("h1",{className:"display-4",children:"Please sign in!"}),Object(j.jsx)("p",{className:"lead",children:"Before continuing you need to sign in."})]})}function x(e){return e.authenticated?Object(j.jsx)(O,{name:e.name,roles:e.roles}):Object(j.jsx)(p,{})}function f(e){return Object(j.jsx)("div",{className:"col",children:Object(j.jsxs)("div",{className:"card mb-4 shadow-sm",children:[Object(j.jsx)("div",{className:"card-header",children:Object(j.jsx)("h4",{className:"my-0 fw-normal",children:e.name})}),Object(j.jsxs)("div",{className:"card-body",children:[Object(j.jsxs)("ul",{className:"list-unstyled mt-3 mb-4",children:[Object(j.jsxs)("li",{children:["requires ",e.name," role"]}),Object(j.jsx)("li",{children:"uses lukasz/yosoy service"})]}),Object(j.jsx)("button",{type:"button",className:"w-100 btn btn-lg btn-primary",onClick:function(){return e.onClick(e.name,e.keycloak)},children:"Call"})]})]})})}var v=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).state={},c.handleApiCall=c.handleApiCall.bind(Object(r.a)(c)),c}return Object(o.a)(n,[{key:"handleApiCall",value:function(e,t){var n=this;fetch("https://api.localtest.me/"+e,{headers:new Headers({Authorization:"Bearer "+t.token})}).then((function(e){return e.json()})).then((function(t){n.setState({response:"got response from "+e+":\n"+JSON.stringify(t,null,2)})})).catch((function(t){n.setState({response:"could not get response from "+e+":\n"+t})}))}},{key:"render",value:function(){var e;return this.props.authenticated?Object(j.jsxs)("div",{children:[Object(j.jsxs)("div",{className:"row row-cols-1 row-cols-md-3 mb-3 text-center",children:[Object(j.jsx)(f,{name:"cocinera",onClick:this.handleApiCall,keycloak:this.props.keycloak}),Object(j.jsx)(f,{name:"camarero",onClick:this.handleApiCall,keycloak:this.props.keycloak}),Object(j.jsx)(f,{name:"doncella",onClick:this.handleApiCall,keycloak:this.props.keycloak})]}),Object(j.jsx)("pre",{children:null===(e=this.state)||void 0===e?void 0:e.response})]}):null}}]),n}(a.a.Component),y=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).handleSignInClick=c.handleSignInClick.bind(Object(r.a)(c)),c.handleSignOutClick=c.handleSignOutClick.bind(Object(r.a)(c)),c.state={authenticated:!1},c}return Object(o.a)(n,[{key:"handleSignInClick",value:function(){this.state.keycloak.login()}},{key:"handleSignOutClick",value:function(){this.state.keycloak.logout()}},{key:"componentDidMount",value:function(){var e=this,t=Object(u.a)({url:"https://auth.localtest.me/auth/",realm:"hotel",clientId:"react"});t.init({onLoad:"check-sso"}).then((function(n){n&&t.loadUserInfo().then((function(n){e.setState({name:n.name,email:n.email,id:n.sub,roles:t.tokenParsed.realm_access.roles})})),e.setState({authenticated:n})})),this.setState({keycloak:t})}},{key:"render",value:function(){return Object(j.jsxs)("div",{children:[Object(j.jsxs)("header",{className:"d-flex flex-column flex-md-row align-items-center p-3 px-md-4 mb-3 bg-body border-bottom shadow-sm",children:[Object(j.jsx)("p",{className:"h5 my-0 me-md-auto fw-normal",children:"Hotel"}),Object(j.jsx)(k,{authenticated:this.state.authenticated,signInClick:this.handleSignInClick,signOutClick:this.handleSignOutClick})]}),Object(j.jsxs)("main",{className:"container",children:[Object(j.jsx)("div",{className:"pricing-header px-3 py-3 pt-md-5 pb-md-4 mx-auto text-center",children:Object(j.jsx)(x,{authenticated:this.state.authenticated,name:this.state.name,roles:this.state.roles})}),Object(j.jsx)(v,{authenticated:this.state.authenticated,keycloak:this.state.keycloak}),Object(j.jsx)("footer",{className:"pt-4 my-md-5 pt-md-5 border-top",children:Object(j.jsx)("div",{className:"row",children:Object(j.jsx)("div",{className:"col-12 col-md",children:Object(j.jsx)("small",{className:"d-block mb-3 text-muted",children:"\xa9 \u0141ukasz Budnik 2021"})})})})]})]})}}]),n}(a.a.Component),g=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,22)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),c(e),a(e),s(e),i(e)}))};i.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(y,{})}),document.getElementById("root")),g()}},[[21,1,2]]]);
//# sourceMappingURL=main.8db2aa9a.chunk.js.map