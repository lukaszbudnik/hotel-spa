(this.webpackJsonphotel=this.webpackJsonphotel||[]).push([[0],{14:function(e,t,n){},21:function(e,t,n){"use strict";n.r(t);var c=n(1),s=n.n(c),a=n(8),i=n.n(a),l=(n(14),n(4)),o=n(5),r=n(2),d=n(7),h=n(6),u=n(9),j=n.n(u),m=n(0);function b(e){return Object(m.jsx)("a",{className:"btn btn-outline-primary",href:"#signin",onClick:e.onClick,children:"Sign in"})}function k(e){return Object(m.jsx)("a",{className:"btn btn-outline-primary",href:"#signout",onClick:e.onClick,children:"Sign out"})}function O(e){return e.authenticated?Object(m.jsx)(k,{onClick:e.signOutClick}):Object(m.jsx)(b,{onClick:e.signInClick})}function p(e){var t;return Object(m.jsxs)("div",{children:[Object(m.jsxs)("h1",{className:"display-4",children:["Welcome ",e.name,"!"]})," ",Object(m.jsx)("p",{className:"lead",children:"There are 3 services in this demo, click on each one to see its response."}),Object(m.jsxs)("p",{className:"lead",children:["You have the following roles: ",null===(t=e.roles)||void 0===t?void 0:t.join(", ")]})]})}function x(e){return Object(m.jsxs)("div",{children:[Object(m.jsx)("h1",{className:"display-4",children:"Please sign in!"}),Object(m.jsx)("p",{className:"lead",children:"Before continuing you need to sign in."})]})}function f(e){return e.authenticated?Object(m.jsx)(p,{name:e.name,roles:e.roles}):Object(m.jsx)(x,{})}function y(e){return Object(m.jsx)("div",{className:"col",children:Object(m.jsxs)("div",{className:"card mb-4 shadow-sm",children:[Object(m.jsx)("div",{className:"card-header",children:Object(m.jsx)("h4",{className:"my-0 fw-normal",children:e.name})}),Object(m.jsxs)("div",{className:"card-body",children:[Object(m.jsxs)("ul",{className:"list-unstyled mt-3 mb-4",children:[Object(m.jsxs)("li",{children:["requires ",e.name," role"]}),Object(m.jsx)("li",{children:"uses lukasz/yosoy service"})]}),Object(m.jsx)("button",{type:"button",className:"w-100 btn btn-lg btn-primary",onClick:function(){return e.onClick(e.name,e.keycloak)},children:"Call"})]})]})})}var v=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).state={},c.handleApiCall=c.handleApiCall.bind(Object(r.a)(c)),c}return Object(o.a)(n,[{key:"handleApiCall",value:function(e,t){var n=this;fetch("https://api.localtest.me/"+e,{headers:new Headers({Authorization:"Bearer "+t.token})}).then((function(e){return e.json()})).then((function(t){n.setState({response:"got response from "+e+":\n"+JSON.stringify(t,null,2)})})).catch((function(t){n.setState({response:"could not get response from "+e+":\n"+t})}))}},{key:"render",value:function(){var e;return this.props.authenticated?Object(m.jsxs)("div",{children:[Object(m.jsxs)("div",{className:"row row-cols-1 row-cols-md-3 mb-3 text-center",children:[Object(m.jsx)(y,{name:"cocinera",onClick:this.handleApiCall,keycloak:this.props.keycloak}),Object(m.jsx)(y,{name:"camarero",onClick:this.handleApiCall,keycloak:this.props.keycloak}),Object(m.jsx)(y,{name:"doncella",onClick:this.handleApiCall,keycloak:this.props.keycloak})]}),Object(m.jsx)("pre",{children:null===(e=this.state)||void 0===e?void 0:e.response})]}):null}}]),n}(s.a.Component),g=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).handleSignInClick=c.handleSignInClick.bind(Object(r.a)(c)),c.handleSignOutClick=c.handleSignOutClick.bind(Object(r.a)(c)),c.state={authenticated:!1},c}return Object(o.a)(n,[{key:"handleSignInClick",value:function(){this.state.keycloak.login()}},{key:"handleSignOutClick",value:function(){this.state.keycloak.logout()}},{key:"componentDidMount",value:function(){var e=this,t=j()("./keycloak.json");t.init({onLoad:"check-sso"}).then((function(n){n&&t.loadUserInfo().then((function(n){e.setState({name:n.name,email:n.email,id:n.sub,roles:t.tokenParsed.realm_access.roles})})),e.setState({keycloak:t,authenticated:n})}))}},{key:"render",value:function(){return Object(m.jsxs)("div",{children:[Object(m.jsxs)("header",{className:"d-flex flex-column flex-md-row align-items-center p-3 px-md-4 mb-3 bg-body border-bottom shadow-sm",children:[Object(m.jsx)("p",{className:"h5 my-0 me-md-auto fw-normal",children:"Hotel"}),Object(m.jsx)(O,{authenticated:this.state.authenticated,signInClick:this.handleSignInClick,signOutClick:this.handleSignOutClick})]}),Object(m.jsxs)("main",{className:"container",children:[Object(m.jsx)("div",{className:"pricing-header px-3 py-3 pt-md-5 pb-md-4 mx-auto text-center",children:Object(m.jsx)(f,{authenticated:this.state.authenticated,name:this.state.name,roles:this.state.roles})}),Object(m.jsx)(v,{authenticated:this.state.authenticated,keycloak:this.state.keycloak}),Object(m.jsx)("footer",{className:"pt-4 my-md-5 pt-md-5 border-top",children:Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col-12 col-md",children:Object(m.jsx)("small",{className:"d-block mb-3 text-muted",children:"\xa9 \u0141ukasz Budnik 2021"})})})})]})]})}}]),n}(s.a.Component),C=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,22)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),c(e),s(e),a(e),i(e)}))};i.a.render(Object(m.jsx)(s.a.StrictMode,{children:Object(m.jsx)(g,{})}),document.getElementById("root")),C()}},[[21,1,2]]]);
//# sourceMappingURL=main.32aad9c6.chunk.js.map