{"version":3,"sources":["App.js","reportWebVitals.js","index.js"],"names":["SignInButton","props","className","href","onClick","SignOutButton","SignInOutButton","authenticated","signOutClick","signInClick","UserGreeting","name","roles","join","GuestGreeting","Greeting","Service","type","keycloak","Services","state","handleApiCall","bind","service","fetch","headers","Headers","Authorization","token","then","response","json","responseJson","setState","JSON","stringify","catch","err","this","React","Component","App","handleSignInClick","handleSignOutClick","login","logout","Keycloak","init","onLoad","loadUserInfo","userInfo","email","id","sub","tokenParsed","realm_access","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.32aad9c6.chunk.js","sourcesContent":["import React from \"react\";\nimport Keycloak from \"keycloak-js\";\n\nconst apiUrl = \"https://api.localtest.me/\";\n\nfunction SignInButton(props) {\n  return (\n    <a\n      className=\"btn btn-outline-primary\"\n      href=\"#signin\"\n      onClick={props.onClick}\n    >\n      Sign in\n    </a>\n  );\n}\n\nfunction SignOutButton(props) {\n  return (\n    <a\n      className=\"btn btn-outline-primary\"\n      href=\"#signout\"\n      onClick={props.onClick}\n    >\n      Sign out\n    </a>\n  );\n}\n\nfunction SignInOutButton(props) {\n  if (props.authenticated) {\n    return <SignOutButton onClick={props.signOutClick} />;\n  }\n  return <SignInButton onClick={props.signInClick} />;\n}\n\nfunction UserGreeting(props) {\n  return (\n    <div>\n      <h1 className=\"display-4\">Welcome {props.name}!</h1>{\" \"}\n      <p className=\"lead\">\n        There are 3 services in this demo, click on each one to see its\n        response.\n      </p>\n      <p className=\"lead\">\n        You have the following roles: {props.roles?.join(\", \")}\n      </p>\n    </div>\n  );\n}\n\nfunction GuestGreeting(props) {\n  return (\n    <div>\n      <h1 className=\"display-4\">Please sign in!</h1>\n      <p className=\"lead\">Before continuing you need to sign in.</p>\n    </div>\n  );\n}\n\nfunction Greeting(props) {\n  if (props.authenticated) {\n    return <UserGreeting name={props.name} roles={props.roles} />;\n  }\n  return <GuestGreeting />;\n}\n\nfunction Service(props) {\n  return (\n    <div className=\"col\">\n      <div className=\"card mb-4 shadow-sm\">\n        <div className=\"card-header\">\n          <h4 className=\"my-0 fw-normal\">{props.name}</h4>\n        </div>\n        <div className=\"card-body\">\n          <ul className=\"list-unstyled mt-3 mb-4\">\n            <li>requires {props.name} role</li>\n            <li>uses lukasz/yosoy service</li>\n          </ul>\n          <button\n            type=\"button\"\n            className=\"w-100 btn btn-lg btn-primary\"\n            onClick={() => props.onClick(props.name, props.keycloak)}\n          >\n            Call\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nclass Services extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n    this.handleApiCall = this.handleApiCall.bind(this);\n  }\n\n  handleApiCall(service, keycloak) {\n    fetch(apiUrl + service, {\n      headers: new Headers({\n        Authorization: \"Bearer \" + keycloak.token,\n      }),\n    })\n      .then((response) => response.json())\n      .then((responseJson) => {\n        this.setState({\n          response:\n            \"got response from \" +\n            service +\n            \":\\n\" +\n            JSON.stringify(responseJson, null, 2),\n        });\n      })\n      .catch((err) => {\n        this.setState({\n          response: \"could not get response from \" + service + \":\\n\" + err,\n        });\n      });\n  }\n\n  render() {\n    if (!this.props.authenticated) {\n      return null;\n    }\n    return (\n      <div>\n        <div className=\"row row-cols-1 row-cols-md-3 mb-3 text-center\">\n          <Service\n            name=\"cocinera\"\n            onClick={this.handleApiCall}\n            keycloak={this.props.keycloak}\n          />\n          <Service\n            name=\"camarero\"\n            onClick={this.handleApiCall}\n            keycloak={this.props.keycloak}\n          />\n          <Service\n            name=\"doncella\"\n            onClick={this.handleApiCall}\n            keycloak={this.props.keycloak}\n          />\n        </div>\n        <pre>{this.state?.response}</pre>\n      </div>\n    );\n  }\n}\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.handleSignInClick = this.handleSignInClick.bind(this);\n    this.handleSignOutClick = this.handleSignOutClick.bind(this);\n    this.state = { authenticated: false };\n  }\n\n  handleSignInClick() {\n    this.state.keycloak.login();\n  }\n\n  handleSignOutClick() {\n    this.state.keycloak.logout();\n  }\n\n  componentDidMount() {\n    const keycloak = Keycloak(\"./keycloak.json\");\n    keycloak.init({ onLoad: \"check-sso\" }).then((authenticated) => {\n      if (authenticated) {\n        keycloak.loadUserInfo().then((userInfo) => {\n          this.setState({\n            name: userInfo.name,\n            email: userInfo.email,\n            id: userInfo.sub,\n            roles: keycloak.tokenParsed.realm_access.roles,\n          });\n        });\n      }\n      this.setState({ keycloak: keycloak, authenticated: authenticated });\n    });\n  }\n\n  render() {\n    return (\n      <div>\n        <header className=\"d-flex flex-column flex-md-row align-items-center p-3 px-md-4 mb-3 bg-body border-bottom shadow-sm\">\n          <p className=\"h5 my-0 me-md-auto fw-normal\">Hotel</p>\n          <SignInOutButton\n            authenticated={this.state.authenticated}\n            signInClick={this.handleSignInClick}\n            signOutClick={this.handleSignOutClick}\n          />\n        </header>\n\n        <main className=\"container\">\n          <div className=\"pricing-header px-3 py-3 pt-md-5 pb-md-4 mx-auto text-center\">\n            <Greeting\n              authenticated={this.state.authenticated}\n              name={this.state.name}\n              roles={this.state.roles}\n            />\n          </div>\n          <Services\n            authenticated={this.state.authenticated}\n            keycloak={this.state.keycloak}\n          />\n          <footer className=\"pt-4 my-md-5 pt-md-5 border-top\">\n            <div className=\"row\">\n              <div className=\"col-12 col-md\">\n                <small className=\"d-block mb-3 text-muted\">\n                  © Łukasz Budnik 2021\n                </small>\n              </div>\n            </div>\n          </footer>\n        </main>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}